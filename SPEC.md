# 線上算命網站專案規格說明

## 專案概述
這是一個純前端的線上算命網站，設計用於部署在 GitHub Pages 上。網站提供基於使用者輸入資訊的個人化算命服務。

## 技術棧
- 純前端實現（HTML, CSS, JavaScript）
- 使用 CDN 引入外部依賴
- 相容性：所有現代瀏覽器

### 使用的外部庫（CDN）
1. Bootstrap 5.3.0 - 用於UI框架
2. Animate.css 4.1.1 - 用於動畫效果
3. SweetAlert2 - 用於美化提示框

## 功能規格

### 已實現功能
1. 基本資料收集
   - 姓名輸入
   - 出生日期選擇
   - 性別選擇

2. 算命結果分析
   - 生肖計算（已修正1900年為基準年的算法）
   - 五行屬性判定
   - 幸運色推薦
   - 八字命盤（年月日柱）
   - 流年運勢預測
   - 運勢指數系統（0-100分）
   - 多面向運勢分析，包含：
     * 流年運勢
     * 八字分析
     * 事業運
     * 財運
     * 感情運
     * 健康運

3. 使用者介面
   - 響應式設計（使用 Bootstrap）
   - 動畫效果（使用 Animate.css）
   - 表單驗證
   - 結果顯示動畫
   - 運勢評分系統（五星制）
   - 運勢指數顏色區分：
     * 90分以上：紅色（特大吉）
     * 75-89分：橙色（大吉）
     * 60-74分：綠色（吉）
     * 45-59分：藍色（小吉）
     * 45分以下：灰色（平）

### 運算邏輯特點
1. 生肖計算
   - 使用1900年作為基準年（鼠年）
   - 修正後確保準確性

2. 運勢生成機制
   - 基於日期和個人資料生成固定運勢
   - 同一天同一個人會得到相同結果
   - 不同日期會有變化
   - 運勢指數計算考慮多個因素：
     * 當前日期
     * 姓名
     * 出生日期
     * 性別
     * 運勢類別

3. 八字計算
   - 年柱：根據出生年計算天干地支
   - 月柱：根據出生月計算天干地支
   - 日柱：根據出生日計算天干地支

### 待開發功能（建議）
1. 更多算命維度
   - 姓名吉凶
   - 今日宜忌
   - 子時運勢預測
   - 流月運勢

2. 介面優化
   - 支援深色模式
   - 加入更多中國傳統元素
   - 添加更多視覺效果

3. 功能擴展
   - 算命結果儲存功能
   - 分享功能（如生成圖片）
   - 更詳細的解讀說明
   - 農曆日期轉換

## 檔案結構
```
├── index.html      # 主要HTML頁面，包含表單和結果顯示
├── style.css       # 樣式表，包含所有自訂樣式
├── script.js       # JavaScript邏輯，包含所有運算和顯示邏輯
└── SPEC.md         # 專案規格說明和進度記錄
```

## 核心函數說明

### 生肖計算相關
```javascript
getZodiacAnimal(birthYear)
- 功能：根據出生年份計算生肖
- 參數：birthYear (數字類型)
- 返回：對應的生肖（字串）
- 備註：使用 1900 年為基準年計算
```

### 五行計算相關
```javascript
getElement(birthYear)
- 功能：計算五行屬性
- 參數：birthYear (數字類型)
- 返回：五行屬性（金、木、水、火、土）

getLuckyColor(element)
- 功能：根據五行取得幸運色
- 參數：element (五行屬性)
- 返回：對應的幸運顏色組合
```

### 運勢計算相關
```javascript
getFixedFortune(category, name, birthdate, gender)
- 功能：根據個人資料生成固定運勢
- 參數：
  * category: 運勢類別
  * name: 姓名
  * birthdate: 出生日期
  * gender: 性別
- 返回：運勢描述文字

calculateFortuneIndex(category, name, birthdate, gender)
- 功能：計算運勢指數
- 參數：同上
- 返回：0-100 的數值
```

### 八字計算相關
```javascript
calculateBaZi(birthdate)
- 功能：計算八字命盤
- 參數：birthdate (Date 物件)
- 返回：包含年月日柱的物件
```

## 開發進度
- [x] 基礎框架搭建
- [x] 使用者介面實現
- [x] 核心算命邏輯
- [x] 生肖計算修正
- [x] 八字命盤實現
- [x] 運勢指數系統
- [x] 動畫效果
- [x] 響應式設計
- [ ] 深色模式支援
- [ ] 更多算命選項
- [ ] 分享功能
- [ ] 結果儲存功能

## 最後更新記錄
- 2025-05-19：
  * 修正生肖計算邏輯（使用1900年為基準）
  * 實現運勢指數系統
  * 改進運勢生成機制（確保同日期結果一致）
  * 完善文檔記錄